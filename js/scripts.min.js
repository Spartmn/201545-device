var link_message=document.querySelector("#js-us"),link_map=document.querySelector("#js-view-map"),popup_message=document.querySelector(".modal-send-message"),popup_map=document.querySelector(".modal-map"),form_message=popup_message.querySelector("form"),name_field=popup_message.querySelector("[name=user]"),email_field=popup_message.querySelector("[name=email]"),message_field=popup_message.querySelector("[name=message]"),storage_name=localStorage.getItem("name"),storage_email=localStorage.getItem("email"),message_close=document.querySelector(".message-close"),map_close=document.querySelector(".map-close"),overlay=document.querySelector(".modal-overlay"),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("name")}catch(e){isStorageSupport=!1}link_message.addEventListener("click",function(e){e.preventDefault(),popup_message.classList.add("modal-show"),overlay.classList.add("overlay-show"),name_field.focus(),storage_name&&(name_field.value=storage_name,email_field.focus()),storage_email&&(email_field.value=storage_email,message_field.focus())}),form_message.addEventListener("submit",function(e){name_field.value||(e.preventDefault(),popup_message.classList.add("modal-error"),name_field.classList.add("field-error")),email_field.value||(e.preventDefault(),popup_message.classList.add("modal-error"),email_field.classList.add("field-error")),message_field.value||(e.preventDefault(),popup_message.classList.add("modal-error"),message_field.classList.add("field-error")),isStorageSupport&&(localStorage.setItem("name",name_field.value),localStorage.setItem("email",email_field.value))}),name_field.oninput=function(){name_field.classList.remove("field-error")},email_field.oninput=function(){email_field.classList.remove("field-error")},message_field.oninput=function(){message_field.classList.remove("field-error")},message_close.addEventListener("click",function(e){e.preventDefault(),popup_message.classList.remove("modal-show"),popup_message.classList.remove("modal-error"),overlay.classList.remove("overlay-show")}),overlay.addEventListener("click",function(e){e.preventDefault(),popup_message.classList.contains("modal-show")&&(popup_message.classList.remove("modal-show"),popup_message.classList.remove("modal-error"),overlay.classList.remove("overlay-show")),popup_map.classList.contains("modal-show")&&(popup_map.classList.remove("modal-show"),overlay.classList.remove("overlay-show"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup_message.classList.contains("modal-show")&&(popup_message.classList.remove("modal-show"),popup_message.classList.remove("modal-error"),overlay.classList.remove("overlay-show")),popup_map.classList.contains("modal-show")&&(popup_map.classList.remove("modal-show"),overlay.classList.remove("overlay-show")))}),link_map.addEventListener("click",function(e){e.preventDefault(),popup_map.classList.add("modal-show"),overlay.classList.add("overlay-show")}),map_close.addEventListener("click",function(e){e.preventDefault(),popup_map.classList.remove("modal-show"),overlay.classList.remove("overlay-show")});